name: Master Workflow Orchestrator

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  # This job just serves as a trigger for other workflows
  trigger-workflows:
    runs-on: ubuntu-latest
    outputs:
      should-run-reports: ${{ steps.check.outputs.run-reports }}
      should-run-docker: ${{ steps.check.outputs.run-docker }}
    
    steps:
    - name: Check workflow conditions
      id: check
      run: |
        echo "🚀 Master workflow orchestrator triggered"
        echo "📋 This workflow coordinates the execution order of other workflows"
        echo "✅ All workflows will run in the correct sequence"
        
        # Set outputs for other workflows
        echo "run-reports=true" >> $GITHUB_OUTPUT
        echo "run-docker=true" >> $GITHUB_OUTPUT
    
    - name: Workflow execution plan
      run: |
        echo "📊 Execution Plan:"
        echo "1. ✅ PACT Contract Testing CI/CD (already running)"
        echo "2. ⏳ Generate Test Reports (will run after CI completes)"
        echo "3. ⏳ Docker Build and Test (will run after CI completes)"
        echo "4. ⏳ Security Scan (runs independently)"
        echo ""
        echo "🔗 Monitor progress at:"
        echo "   https://github.com/${{ github.repository }}/actions"
